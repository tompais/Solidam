@Styles.Render("~/Content/Views/Inicio/inicio.css")
@Styles.Render("~/Content/Views/Inicio/inicioResponsive.css")
@{
    ViewBag.Title = "Mis Propuestas";
}

@using System.Globalization
@using Models
@model List<Models.Propuestas>

<div id="causes" class="section">
    <div class="container mt-5">
        <div class="row">

            <nav class="navbar navbar-light bg-light justify-content-between w-100 bg-white">
                <h2>Mis Propuestas<i class="fa fa-id-card ml-2"></i></h2>

                @if (@Model.Count >= 3)
                {
                    <span><i class="fa fa-exclamation-triangle mr-2"></i>No puedes poseer mas de 3 propuestas activas</span><a class="btn float-right disabled btnVerdeSolidam"><i class="fa fa-plus mr-1"></i>Crear</a>
                }
                else
                {
                    <a href="@Url.Action("CrearPropuesta", "Propuesta")" class="btn btn-primary float-right btnVerdeSolidam"><i class="fa fa-plus mr-1"></i>Crear</a>
                }


            </nav>

            @if (@Model.Any())
            {
                foreach (Propuestas propuesta in Model)
                {
                    <div class="col-md-4 mt-4">
                        <div class="card p-4 causes">
                            <div class="causes-img">
                                <a href="@Url.Action("Detalle", "Propuesta", new {id = @propuesta.IdPropuesta})">
                                    <img src="@Url.Content($"~/Images/Views/Propuesta/{propuesta.Foto}")" width="300" height="230" alt="">
                                </a>
                            </div>
                            <div class="causes-content">
                                <h3>@propuesta.Nombre</h3>
                                <span class="mr-3">Usuario: </span><span>@propuesta.Usuarios.Apellido, @propuesta.Usuarios.Nombre</span><br />
                                <span class="mr-3">Aceptacion: (@propuesta.Valoracion%)</span><br />
                                <span class="mr-3"> Disponible hasta: <strong>@propuesta.FechaFin.ToString("dd/MM/yyyy", CultureInfo.InvariantCulture)</strong></span>
                            </div>
                            <div class="d-flex justify-content-between mt-3">
                                <a class="btn text-white btnVerdeSolidam" href="@Url.Action("Detalle", "Propuesta", new {id = @propuesta.IdPropuesta})"><i class="fas fa-eye mr-2"></i>Ver detalle</a>
                            </div>
                            <div class="d-flex justify-content-between mt-3">
                                <a class="btn text-white btnVerdeSolidam" href="@Url.Action("ModificarPropuesta", "Propuesta", new {id = @propuesta.IdPropuesta})">Modificar</a>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-md-12 mt-3">
                    <div class="text-center">
                        <h2 class="title">No posees ninguna propuesta</h2>
                        <p class="">Si deseas crear una nueva propuesta presiona el boton de crear.</p>
                    </div>
                </div>
            }
        </div>
    </div>
</div>